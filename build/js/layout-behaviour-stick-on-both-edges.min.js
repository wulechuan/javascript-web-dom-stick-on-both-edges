!function(e){function n(e,n){function o(){return n+Date.now()+"-"+(1e6*Math.random()+"").slice(0,6)}n="string"==typeof n?n:"",n=n.replace(/\-+$/,"")+"-";for(var t=o();e[t];)t=o();return t}(function(e,n,o,t){"use strict";function a(e,n){e.config(n),r(e),B.call(e,n,!0),"boolean"==typeof n.shouldEnable?y.call(n.shouldEnable,n.reasonForEnablingOrDisabling||n.reason||"User desired on initialization."):e.options.shouldEnableOnInit&&p.call(e,"Forced to enabled on initialization."),Y.call(e);var o=i(e).boundFunctions;window.addEventListener("scroll",o.listenToWindowOnScrollEvent)}function i(e){return ae[e.__pToken]}function r(e){var n=i(e).boundFunctions;n.doIntervalOfRenewingState=F.bind(null,e),n.doIntervalOfUpdateLayout=R.bind(null,e),n.doUpdateLayout=function(){q(e)}.bind(e);var o=t(e.options.throttleTimeInMSForScrollAndResizeListeners,n.doUpdateLayout);n.listenToWindowOnScrollEvent=o,n.listenToWindowOnResizeEvent=o}function s(){return i(this).isEnabled}function l(){var e=i(this).state.layouts;if(e.isFreeLayout)return"free layout";if(e.isPinnedToWindowTop)return"pinned to top";if(e.isPinnerToParentBottom)return"following lower boundry";throw RangeError(ee,"Fatal: None of the three states are active.")}function u(e){var n=i(this).state.layouts;if(!e||"string"!=typeof e)return!1;switch(e.toLowerCase().replace(/\s*[\s\-]\s*/g,"-").replace(/^\s+/,"").replace(/\s+$/,"")){case"free":case"freelayout":case"default":return n.isFreeLayout;case"top":case"hanging":case"pinned-to-top":return n.isPinnedToWindowTop;case"following":case"bottom":case"following-lower-boundry":case"pinned-to-bottom":return n.isPinnerToParentBottom}return!1}function d(e){var n,o,t,a=this,i=a.options,r=a.elements;n="hangingLowerBoundryRef",o=n+"El",e.hasOwnProperty(o)&&(t=e[o],r[n]instanceof Node?t instanceof Node&&(r[n]=t):t instanceof Node?r[n]=t:r[n]=r.parentPositionRef),n="intervalTimeInMSForRenewingState",e.hasOwnProperty(n)&&(t=parseInt(e[n]),!isNaN(t)&&t>20&&(i[n]=t)),n="intervalTimeInMSForUpdatingLayout",e.hasOwnProperty(n)&&(t=parseInt(e[n]),!isNaN(t)&&t>20&&(i[n]=t)),c(a,"onEnabling",e),c(a,"onEnabled",e),c(a,"onDisabling",e),c(a,"onDisabled",e),c(a,"onDestroying",e),c(a,"onDestroyed",e),c(a,"onReturningToFreeLayout",e),c(a,"onReturnedToFreeLayout",e),c(a,"onIntervalBegin",e),c(a,"onIntervalEnd",e)}function c(e,n,o){var t=i(e).events,a=o[n];"function"!=typeof a&&void 0!==a||(t[n]=a)}function f(e,n,o,t){var a=i(e).events;return"function"!=typeof a[n]?void(o&&(t=t||'The "'+n+'" is NOT handled.',te.warn(t))):a[n].call(e,e.state)}function g(e){T.call(this,e,!0)}function h(e){var n=e.elements,o=i(e).boundFunctions;window.removeEventListener("scroll",o.listenToWindowOnScrollEvent),window.removeEventListener("resize",o.listenToWindowOnResizeEvent),n.root.style.height="",n.chiefContent.style.top="",Z(e,null),f(e,"onDestroyed",!0)}function y(e,n,o){if(void 0!==e){e=!!e;if(w(this,e,o)){var t=e?"Enabling":o?"DESTORYING":"DISABLING";return void te.warn(t,"request was cancelled.")}var a={};a.shouldEnable=!!e,a.reason=n&&"string"==typeof n?n:"<unkown>",!e&&o&&(a.isForcedToRenew=!0,a.shouldDestroyAfterDisabled=!0),M.call(this,a),Y.call(this)}}function p(e){y.call(this,!0,e)}function T(e,n){y.call(this,!1,e,n)}function w(e,n,o){if(n)return f(e,"onEnabling");var t=f(e,"onDisabling");if(t){if(!o)return t;te.warn("Destroying request will be cancelled by onDisabling handler.")}return f(e,"onDestroying")}function v(e,n){var o=e.state;i(e).isEnabled=n,n?(delete o.shouldDestroyAfterDisabled,f(e,"onEnabled")):(f(e,"onDisabled"),e.clearIntervalOfRenewingState(),e.clearIntervalOfUpdateLayout(),o.shouldDestroyAfterDisabled&&h(e))}function L(){b(this,!0)}function m(){b(this,!1)}function b(e,n){var o=i(e),t=n?"Starting":"STOPPING",a="interval for renewing related info.",r="intervalIDForRenewingState",s=o[r],l=!isNaN(s);n&&!l?(te.info(t,a),o[r]=setInterval(o.boundFunctions.doIntervalOfRenewingState,e.options.intervalTimeInMSForRenewingState)):!n&&l&&(te.warn(t,a),clearInterval(s),o[r]=NaN)}function F(e){f(e,"onIntervalBegin")||(O.call(e,!0),k.call(e,!0),C.call(e,!0),D.call(e,!0)),f(e,"onIntervalEnd")}function I(){E(this,!0)}function N(){E(this,!1)}function E(e,n){var o=i(e),t=n?"Starting":"STOPPING",a="intervalIDForUpdatingLayout",r=o[a],s=!isNaN(r);n&&!s?(te.info(t,"interval for updating layout."),o[a]=setInterval(o.boundFunctions.doIntervalOfUpdateLayout,e.options.intervalTimeInMSForUpdatingLayout)):!n&&s&&(te.warn(t,"interval for updating layout."),clearInterval(r),o[a]=NaN)}function R(e){Y.call(e)}function S(e){B.call(this,e,!1),Y.call(this)}function B(e,n){var o=!0;"object"==typeof e&&e&&(P.call(this,e.contentTopToWindowTopInHangingLayouts,n),U.call(this,e.contentBottomToLowerBoundryInHangingLayouts,n),o=W.call(this,e.shouldUseBottomOfHangingLowerBoundryRef,n)),o&&k.call(this,n),O.call(this,n),C.call(this,n),D.call(this,n)}function O(e){var n={blockHeight:this.elements.chiefContent.offsetHeight};e&&(n.isForcedToUpdate=!0),M.call(this,n)}function C(e){var n={};e&&(n.isForcedToUpdate=!0),n.contentTopToRootTopInFreeLayout=this.elements.chiefContent.offsetTop,M.call(this,n)}function P(e,n){var o={};n&&(o.isForcedToUpdate=!0),e=parseFloat(e),isNaN(e)||(o.contentTopToWindowTopInHangingLayouts=e),M.call(this,o)}function U(e,n){var o={};n&&(o.isForcedToUpdate=!0),e=parseFloat(e),isNaN(e)||(o.contentBottomToLowerBoundryInHangingLayouts=e),M.call(this,o)}function D(e){var n,o=this,t=i(o).state,a=!0,r=!0;t.layouts.isFreeLayout||(e?(t.shouldRenewFreeLayoutInfoNextTimeEnteringFreeLayout=!1,n=o.state.methodForSwitchingToCurrentLayout,r=$(o,e,!0)):(a=!1,t.shouldRenewFreeLayoutInfoNextTimeEnteringFreeLayout=!0)),a&&H(o,e),r||"function"!=typeof n||n(o)}function H(e,n){var o=e.elements.chiefContent.getBoundingClientRect();if(0===o.width&&0===o.height)return void te.warn('\n\t Cannot evaluate chiefContentEl\'s "boundingClientRect"!',"\n\t The chief content elment might not be visible at the moment.");var t={};n&&(t.isForcedToUpdate=!0),t.contentTopToPageTopInFreeLayout=o.top+window.scrollY,M.call(e,t)}function W(e,n){var o=this,t=o.elements;if(t.parentPositionRef===t.hangingLowerBoundryRef||null===e||void 0===e)return!0;o.state.shouldUseBottomOfHangingLowerBoundryRef=!!e;var a={};return n&&(a.isForcedToUpdate=!0),k.call(this,n),!1}function k(e){var n=A(this);e&&(n.isForcedToUpdate=!0),M.call(this,n)}function A(e){var n=e.state,o="hangingLowerBoundryToPageTop",t=NaN,a=NaN,r=e.elements.hangingLowerBoundryRef.getBoundingClientRect();0===r.width&&0===r.height?te.warn("Reference element for deciding hanging lower boundry is invisible at this moment."):(t=r[n.shouldUseBottomOfHangingLowerBoundryRef?"bottom":"top"],a=t+window.scrollY),i(e).hangingLowerBoundryToWindowTop=t,n[o]=a;var s={};return s[o]=a,s}function M(e){var n=this,t=i(n).updatingStatesQueue;!t[t.length-1]&&t.push({});var a=t[t.length-1];"function"==typeof e?e.call(n,a):"object"!=typeof e||Array.isArray(e)?a.isForcedToUpdate=a.isForcedToUpdate||void 0===e||!!e:o(a,e)}function j(e){var n=i(e),o=n.updatingStatesQueue.shift();return z(e,e.state,o),o}function x(e,n){o(e.state,n)}function z(e,n,o){G(e,n,o),_(e,o)}function G(e,n,o){Object.keys(e.state).forEach(function(t){Q(t,n,o)?i(e).state.somethingChanged=!0:delete o[t]})}function Q(e,n,o){var t=!1,a=n[e],i=o[e];return void 0!==i&&null!==i&&(void 0===a||null===a?t=!0:a!==i&&(t=!(isNaN(a)&&isNaN(i))),t)}function _(e,n){if(i(e).state.somethingChanged){var o,t,a,r;if("boolean"==typeof n.shouldEnable){o="reason";var s=n.shouldEnable;t=s?"Enabling":n.shouldDestroyAfterDisabled?"DESTORYING":"DISABLING",a="behaviour...\n",r=n[o],r=ne.slice("Reason: ".length)+"Reason: "+r.replace(/\n/g,"\n "+ne),s?te.info(t,a,r):te.warn(t,a," ",r)}}}function Y(){var e=this,n=i(e),o=e.state;if(!(n.updatingStatesQueue.length<1)){var t=j(e),a=t.isForcedToUpdate;delete t.isForcedToUpdate,(n.somethingChanged||a)&&(x(e,t),q(e,a)),"boolean"==typeof t.shouldEnable&&(v(e,t.shouldEnable),delete o.reason)}}function q(e,n){var o=e.elements,t=i(e),a=e.state;A(e);var r=a.contentTopToWindowTopInHangingLayouts,s=window.scrollY+r,l=a.hangingLowerBoundryToPageTop-a.contentTopToPageTopInFreeLayout,u=a.blockHeight+a.contentBottomToLowerBoundryInHangingLayouts,d=t.hangingLowerBoundryToWindowTop-r,c=a.blockHeight,f=window.innerHeight<u||!isNaN(l)&&l<u;!a.shouldEnable||f||s<=a.contentTopToPageTopInFreeLayout?$(e,n):d<=u?J(e,n,c,l-u+o.root.clientTop+a.contentTopToRootTopInFreeLayout):V(e,n,c,a.contentTopToWindowTopInHangingLayouts),t.somethingChanged=!1,delete a.methodForSwitchingToCurrentLayout}function $(e,n,o){var t=i(e).state,a=t.layouts.isFreeLayout,r=K(e,{methodForSwitchingToCurrentLayout:$,isForcedToUpdate:n,pNameOfLayoutMark:"isFreeLayout",pNameOfCssClass:o?"layoutFreeTemporary":"layoutFree",rootElHeight:"",contentElTop:""});if(!r){var s=e.options.shouldAlwaysRenewFreeLayoutInfo;!s&&!t.shouldRenewFreeLayoutInfoNextTimeEnteringFreeLayout||a||S.call(e),t.shouldRenewFreeLayoutInfoNextTimeEnteringFreeLayout=!1}return r}function V(e,n,o,t){return K(e,{methodForSwitchingToCurrentLayout:V,isForcedToUpdate:n,pNameOfLayoutMark:"isPinnedToWindowTop",pNameOfCssClass:"layoutPinToWindowTop",rootElHeight:o+"px",contentElTop:t+"px"})}function J(e,n,o,t){return K(e,{methodForSwitchingToCurrentLayout:J,isForcedToUpdate:n,pNameOfLayoutMark:"isPinnerToParentBottom",pNameOfCssClass:"layoutPinToParentBottom",rootElHeight:o+"px",contentElTop:t+"px"})}function K(e,n){var o=i(e),t=e.state,a=e.elements,r=n.pNameOfLayoutMark,s=n.logStringWhenActuallySwitching;return!(!o[r]||o.somethingChanged||n.isForcedToUpdate)||(n.shouldDebug&&s&&te.info(s),t.methodForSwitchingToCurrentLayout=n.methodForSwitchingToCurrentLayout,X(e,r),Z(e,n.pNameOfCssClass),a.chiefContent.style.top=n.contentElTop,a.root.style.height=n.rootElHeight,!1)}function X(e,n){var o=i(e).state.layouts;Object.keys(o).forEach(function(e){o[e]=n===e})}function Z(e,n){var o=e.elements.chiefContent.classList,t=e.options.cssClassName;for(var a in t){var i=t[a];a===n?i&&o.add(i):i&&o.remove(i)}}var ee="{"+e+"} ==>",ne=ee.replace(/\S/g," "),oe=window.console,te={};["log","info","warn","debug","trace","error"].forEach(function(e){var n=oe[e];"function"==typeof n&&(te[e]=n.bind(oe,ee))});var ae={};return function(o){var t=this;if(t.console=te,t.options={shouldEnableOnInit:!1,shouldAlwaysRenewFreeLayoutInfo:!0,cssClassName:{layoutFreeTemporary:"js-stick-on-both-edges-layout-temporarily-free",layoutFree:"js-stick-on-both-edges-layout-free",layoutPinToWindowTop:"js-stick-on-both-edges-layout-hang-to-window-top",layoutPinToParentBottom:"js-stick-on-both-edges-layout-pin-to-lower-boundry"},intervalTimeInMSForRenewingState:500,intervalTimeInMSForUpdatingLayout:40,throttleTimeInMSForScrollAndResizeListeners:16},t.state={shouldEnable:!1,blockHeight:NaN,contentTopToPageTopInFreeLayout:NaN,contentTopToRootTopInFreeLayout:0,contentTopToWindowTopInHangingLayouts:0,contentBottomToLowerBoundryInHangingLayouts:15,shouldUseBottomOfHangingLowerBoundryRef:!1,hangingLowerBoundryToPageTop:NaN},o=o||{},!(o.parentPositionRefEl instanceof Node))throw new Error("Invalid parentPositionRef element.");if(!(o.rootEl instanceof Node))throw new Error("Invalid root element.");if(!(o.chiefContentEl instanceof Node))throw new Error("Invalid chiefContent element.");t.elements={root:o.rootEl,chiefContent:o.chiefContentEl,parentPositionRef:o.parentPositionRefEl,hangingLowerBoundryRef:null};var i={isEnabled:!1,state:{layouts:{isFreeLayout:!0,isPinnedToWindowTop:!1,isPinnerToParentBottom:!1},somethingChanged:!1,shouldRenewFreeLayoutInfoNextTimeEnteringFreeLayout:!1},events:{},boundFunctions:{},updatingStatesQueue:[],hangingLowerBoundryToWindowTop:NaN,intervalIDForRenewingState:NaN,intervalIDForUpdatingLayout:NaN};t.__pToken=n(ae,e),ae[t.__pToken]=i,t.config=d,t.isEnabled=s,t.currentLayout=l,t.currentLayoutIs=u,t.enableOrDisable=y,t.enable=p,t.disable=T,t.destroy=g,t.renewStateAndThenUpdate=S,t.renewState=B,t.renewContentTopToWindowTopInHangingLayouts=P,t.renewHangingLowerBoundryValue=k,t.renewHangingLowerBoundryUsedBorder=W,t.startIntervalOfRenewingState=L,t.clearIntervalOfRenewingState=m,t.startIntervalOfUpdateLayout=I,t.clearIntervalOfUpdateLayout=N,t.requestLayoutUpdate=M,t.updateLayout=Y,a(t,o)}})("StickOnBothEdges",n,window.jQuery.extend,window.jQuery.throttle)}();